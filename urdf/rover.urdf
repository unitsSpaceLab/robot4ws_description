<?xml version="1.0" encoding="utf-8"?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from rover.urdf.xacro               | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="Archimede">
  <material name="black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
  <material name="blue">
    <color rgba="0.0 0.0 0.8 1.0"/>
  </material>
  <material name="green">
    <color rgba="0.0 0.8 0.0 1.0"/>
  </material>
  <material name="gray">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>
  <material name="darkgray">
    <color rgba="0.3 0.3 0.3 1.0"/>
  </material>
  <material name="red">
    <color rgba="0.8 0.0 0.0 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <material name="yellow">
    <color rgba="0.8 0.8 0.0 1.0"/>
  </material>
  <material name="aluminum">
    <color rgba="0.5 0.5 0.5 1"/>
  </material>
  <material name="plastic">
    <color rgba="0.1 0.1 0.1 1"/>
  </material>
  <!-- Define world link-->
  <link name="Archimede_base_link"/>
  <!-- Define foot print-->
  <!-- <link name="${name}_foot_print"/>
		<joint name="${name}_foot_print_joint" type="fixed">
			<parent link="${name}_base_link_dummy"/>
			<child link="${name}_foot_print"/>
			<origin xyz="0 0 -0.16" rpy="0 0 0"/>
		</joint> -->
  <!-- <gazebo reference="${name}_foot_print_joint">
			<disableFixedJointLumping>true</disableFixedJointLumping> 
			<preserveFixedJoint>true</preserveFixedJoint>
		</gazebo> -->
  <!-- Define rover base link-->
  <link name="Archimede_base_link_dummy">
    <inertial>
      <mass value="1"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="1.71402" ixy="0.0" ixz="0.0" iyy="0.8856" iyz="0.0" izz="2.5725"/>
    </inertial>
    <visual name="Archimede_body_visual">
      <origin rpy="0 0 0" xyz="0.005 0 0"/>
      <geometry>
        <mesh filename="package://robot4ws_description/meshes/rover_chassis_v7.STL" scale="1 1 1"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>
  <!-- Define here the joint of the tilt plate to the body -->
  <!-- Dummy joint link for the differential -->
  <!-- <xacro:if value="${has_differential}">
			<link name="${name}_dummy_disk">
				<inertial>
            		<origin xyz="0 0 0" rpy="0 0 0"/>
					<mass value="1e-1"/>
					<inertia ixx="1e-1" ixy="0" ixz="0" iyy="1e-1" iyz="0" izz="1e-1"/>
				</inertial>
				<visual>
					Use disk as simple geometry visualization
					<geometry>
						<cylinder radius="0.05" length="0.05"/>
						<box size="0.20 0.20 0.05"/>
					</geometry>
				</visual>
			</link>
		</xacro:if> -->
  <!-- Define here the joint of the dummy disk -->
  <!-- <xacro:if value="${has_differential}">
			<joint name="${name}_dummy_joint" type="revolute">
				<parent link="${name}_base_link_dummy"/>
				<child link="${name}_dummy_disk"/>
				<origin xyz="0 0 0" rpy="${-pi/2} 0 0"/>
				<axis xyz="0 0 1"/>
				<limit lower="0" upper="0" effort="1e6" velocity="1e6"/>
			</joint>
		</xacro:if> -->
  <!-- <xacro:if value="${has_differential}">
			<gazebo reference="{name}_dummy_joint">
				<disableFixedJointLumping>true</disableFixedJointLumping>
				<preserveFixedJoint>true</preserveFixedJoint>
			</gazebo>
		</xacro:if> -->
  <!-- Define here the color of the dummy disk -->
  <!-- <xacro:if value="${has_differential}">
			<gazebo reference="${name}_dummy_disk">
				<material>Gazebo/Blue</material>
			</gazebo>
		</xacro:if> -->
  <!-- DEFINE HERE THE IMU LINK -->
  <link name="Archimede_imu_link"/>
  <joint name="Archimede_imu_joint" type="fixed">
    <parent link="Archimede_base_link_dummy"/>
    <child link="Archimede_imu_link"/>
    <origin rpy="0 0 0" xyz="0 0 0.08"/>
  </joint>
  <!-- <gazebo reference="${name}_imu_joint">
			<disableFixedJointLumping>true</disableFixedJointLumping> 
			<preserveFixedJoint>true</preserveFixedJoint>
		</gazebo>  -->
  <!-- DEFINE HERE THE SCAN LINK -->
  <link name="Archimede_scan_link"/>
  <joint name="Archimede_scan_joint" type="fixed">
    <parent link="Archimede_base_link_dummy"/>
    <child link="Archimede_scan_link"/>
    <origin rpy="0 0 0" xyz="0 0 0.13"/>
  </joint>
  <!-- DEFINE HERE THE RASPBERRY PI CAMERA LINK -->
  <link name="Archimede_pi_camera_link"/>
  <joint name="Archimede_pi_camera_joint" type="fixed">
    <parent link="Archimede_base_link_dummy"/>
    <child link="Archimede_pi_camera_link"/>
    <origin rpy="0 0 0" xyz="0.15 0 0.075"/>
  </joint>
  <link name="Archimede_pi_camera_color_optical_frame"/>
  <joint name="Archimede_pi_camera_color_optical_joint" type="fixed">
    <parent link="Archimede_pi_camera_link"/>
    <child link="Archimede_pi_camera_color_optical_frame"/>
    <origin rpy="0 0 0" xyz="0 0 0.005"/>
  </joint>
  <link name="Archimede_realsense_d435i_link"/>
  <joint name="Archimede_realsense_joint" type="fixed">
    <parent link="Archimede_base_link_dummy"/>
    <child link="Archimede_realsense_d435i_link"/>
    <origin rpy="0 0 0" xyz="0.15 0 0.2"/>
  </joint>
  <!-- Define here the world joint -->
  <joint name="Archimede_world_joint" type="fixed">
    <parent link="Archimede_base_link"/>
    <child link="Archimede_base_link_dummy"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!-- <gazebo reference="${name}_world_joint">
			<preserveFixedJoint>false</preserveFixedJoint>
		</gazebo> -->
  <gazebo reference="Archimede_base_link">
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- Define here steer link-->
  <link name="Archimede_fl_steer_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>
  <!-- Define here steer joint -->
  <joint name="Archimede_fl_steer_joint" type="revolute">
    <origin rpy="0 0 0.0" xyz="0.36574 0.2215 -0.07368"/>
    <parent link="Archimede_base_link_dummy"/>
    <child link="Archimede_fl_steer_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="1e6" lower="-3.14" upper="3.14" velocity="1e6"/>
  </joint>
  <!-- Define here wheel link -->
  <link name="Archimede_fl_wheel_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.05" ixy="0" ixz="0" iyy="0.05" iyz="0" izz="0.05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0.016 0"/>
      <geometry>
        <mesh filename="package://robot4ws_description/meshes/wheel_v2.STL" scale="1 1 1"/>
      </geometry>
      <material name="gray"/>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.085"/>
      </geometry>
      <surface>
        <friction>
          <ode>
            <!-- <mu>100.0</mu>
                            <mu2>100.0</mu2> -->
          </ode>
        </friction>
        <contact>
          <ode>
            <!-- <kp>1e8</kp>
                            <kd>1</kd>
                            <min_depth>0.001</min_depth> -->
          </ode>
        </contact>
      </surface>
    </collision>
  </link>
  <!-- Define here drive joint (RIVEDERE) -->
  <joint name="Archimede_fl_drive_joint" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="Archimede_fl_steer_link"/>
    <child link="Archimede_fl_wheel_link"/>
    <axis xyz="0 1 0"/>
  </joint>
  <gazebo reference="Archimede_fl_wheel_link">
    <material>Gazebo/Gray</material>
  </gazebo>
  <!-- Define here the transmission -->
  <transmission name="Archimede_fl_drive_transmission}">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="Archimede_fl_drive_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="Archimede_fl_drive_actuator}">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="Archimede_fl_steer_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="Archimede_fl_steer_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="Archimede_fl_steer_actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Define here steer link-->
  <link name="Archimede_bl_steer_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>
  <!-- Define here steer joint -->
  <joint name="Archimede_bl_steer_joint" type="revolute">
    <origin rpy="0 0 0.0" xyz="-0.36574 0.2215 -0.07368"/>
    <parent link="Archimede_base_link_dummy"/>
    <child link="Archimede_bl_steer_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="1e6" lower="-3.14" upper="3.14" velocity="1e6"/>
  </joint>
  <!-- Define here wheel link -->
  <link name="Archimede_bl_wheel_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.05" ixy="0" ixz="0" iyy="0.05" iyz="0" izz="0.05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0.016 0"/>
      <geometry>
        <mesh filename="package://robot4ws_description/meshes/wheel_v2.STL" scale="1 1 1"/>
      </geometry>
      <material name="gray"/>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.085"/>
      </geometry>
      <surface>
        <friction>
          <ode>
            <!-- <mu>100.0</mu>
                            <mu2>100.0</mu2> -->
          </ode>
        </friction>
        <contact>
          <ode>
            <!-- <kp>1e8</kp>
                            <kd>1</kd>
                            <min_depth>0.001</min_depth> -->
          </ode>
        </contact>
      </surface>
    </collision>
  </link>
  <!-- Define here drive joint (RIVEDERE) -->
  <joint name="Archimede_bl_drive_joint" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="Archimede_bl_steer_link"/>
    <child link="Archimede_bl_wheel_link"/>
    <axis xyz="0 1 0"/>
  </joint>
  <gazebo reference="Archimede_bl_wheel_link">
    <material>Gazebo/Gray</material>
  </gazebo>
  <!-- Define here the transmission -->
  <transmission name="Archimede_bl_drive_transmission}">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="Archimede_bl_drive_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="Archimede_bl_drive_actuator}">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="Archimede_bl_steer_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="Archimede_bl_steer_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="Archimede_bl_steer_actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Define here steer link-->
  <link name="Archimede_fr_steer_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>
  <!-- Define here steer joint -->
  <joint name="Archimede_fr_steer_joint" type="revolute">
    <origin rpy="0 0 -3.14159265359" xyz="0.36574 -0.2215 -0.07368"/>
    <parent link="Archimede_base_link_dummy"/>
    <child link="Archimede_fr_steer_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="1e6" lower="-3.14" upper="3.14" velocity="1e6"/>
  </joint>
  <!-- Define here wheel link -->
  <link name="Archimede_fr_wheel_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.05" ixy="0" ixz="0" iyy="0.05" iyz="0" izz="0.05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0.016 0"/>
      <geometry>
        <mesh filename="package://robot4ws_description/meshes/wheel_v2.STL" scale="1 1 1"/>
      </geometry>
      <material name="gray"/>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.085"/>
      </geometry>
      <surface>
        <friction>
          <ode>
            <!-- <mu>100.0</mu>
                            <mu2>100.0</mu2> -->
          </ode>
        </friction>
        <contact>
          <ode>
            <!-- <kp>1e8</kp>
                            <kd>1</kd>
                            <min_depth>0.001</min_depth> -->
          </ode>
        </contact>
      </surface>
    </collision>
  </link>
  <!-- Define here drive joint (RIVEDERE) -->
  <joint name="Archimede_fr_drive_joint" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="Archimede_fr_steer_link"/>
    <child link="Archimede_fr_wheel_link"/>
    <axis xyz="0 1 0"/>
  </joint>
  <gazebo reference="Archimede_fr_wheel_link">
    <material>Gazebo/Gray</material>
  </gazebo>
  <!-- Define here the transmission -->
  <transmission name="Archimede_fr_drive_transmission}">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="Archimede_fr_drive_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="Archimede_fr_drive_actuator}">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="Archimede_fr_steer_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="Archimede_fr_steer_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="Archimede_fr_steer_actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Define here steer link-->
  <link name="Archimede_br_steer_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>
  <!-- Define here steer joint -->
  <joint name="Archimede_br_steer_joint" type="revolute">
    <origin rpy="0 0 -3.14159265359" xyz="-0.36574 -0.2215 -0.07368"/>
    <parent link="Archimede_base_link_dummy"/>
    <child link="Archimede_br_steer_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="1e6" lower="-3.14" upper="3.14" velocity="1e6"/>
  </joint>
  <!-- Define here wheel link -->
  <link name="Archimede_br_wheel_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.05" ixy="0" ixz="0" iyy="0.05" iyz="0" izz="0.05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0.016 0"/>
      <geometry>
        <mesh filename="package://robot4ws_description/meshes/wheel_v2.STL" scale="1 1 1"/>
      </geometry>
      <material name="gray"/>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.085"/>
      </geometry>
      <surface>
        <friction>
          <ode>
            <!-- <mu>100.0</mu>
                            <mu2>100.0</mu2> -->
          </ode>
        </friction>
        <contact>
          <ode>
            <!-- <kp>1e8</kp>
                            <kd>1</kd>
                            <min_depth>0.001</min_depth> -->
          </ode>
        </contact>
      </surface>
    </collision>
  </link>
  <!-- Define here drive joint (RIVEDERE) -->
  <joint name="Archimede_br_drive_joint" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="Archimede_br_steer_link"/>
    <child link="Archimede_br_wheel_link"/>
    <axis xyz="0 1 0"/>
  </joint>
  <gazebo reference="Archimede_br_wheel_link">
    <material>Gazebo/Gray</material>
  </gazebo>
  <!-- Define here the transmission -->
  <transmission name="Archimede_br_drive_transmission}">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="Archimede_br_drive_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="Archimede_br_drive_actuator}">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="Archimede_br_steer_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="Archimede_br_steer_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="Archimede_br_steer_actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- camera body, with origin at bottom screw mount -->
  <joint name="rs_d435i_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="Archimede_realsense_d435i_link"/>
    <child link="rs_d435i_bottom_screw_frame"/>
  </joint>
  <link name="rs_d435i_bottom_screw_frame"/>
  <joint name="rs_d435i_link_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.0106 0.0175 0.0125"/>
    <parent link="rs_d435i_bottom_screw_frame"/>
    <child link="rs_d435i_link"/>
  </joint>
  <link name="rs_d435i_link">
    <visual>
      <!-- the mesh origin is at front plate in between the two infrared camera axes -->
      <origin rpy="1.57079632679 0 1.57079632679" xyz="0.0043 -0.0175 0"/>
      <geometry>
        <mesh filename="package://realsense2_description/meshes/d435.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 -0.0175 0"/>
      <geometry>
        <box size="0.02505 0.09 0.025"/>
      </geometry>
    </collision>
    <inertial>
      <!-- The following are not reliable values, and should not be used for modeling -->
      <mass value="0.072"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.003881243" ixy="0.0" ixz="0.0" iyy="0.000498940" iyz="0.0" izz="0.003879257"/>
    </inertial>
  </link>
  <!-- camera depth joints and links -->
  <joint name="rs_d435i_depth_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="rs_d435i_link"/>
    <child link="rs_d435i_depth_frame"/>
  </joint>
  <link name="rs_d435i_depth_frame"/>
  <joint name="rs_d435i_depth_optical_joint" type="fixed">
    <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
    <parent link="rs_d435i_depth_frame"/>
    <child link="rs_d435i_depth_optical_frame"/>
  </joint>
  <link name="rs_d435i_depth_optical_frame"/>
  <!-- camera left IR joints and links -->
  <joint name="rs_d435i_infra1_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.0 0"/>
    <parent link="rs_d435i_link"/>
    <child link="rs_d435i_infra1_frame"/>
  </joint>
  <link name="rs_d435i_infra1_frame"/>
  <joint name="rs_d435i_infra1_optical_joint" type="fixed">
    <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
    <parent link="rs_d435i_infra1_frame"/>
    <child link="rs_d435i_infra1_optical_frame"/>
  </joint>
  <link name="rs_d435i_infra1_optical_frame"/>
  <!-- camera right IR joints and links -->
  <joint name="rs_d435i_infra2_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 -0.05 0"/>
    <parent link="rs_d435i_link"/>
    <child link="rs_d435i_infra2_frame"/>
  </joint>
  <link name="rs_d435i_infra2_frame"/>
  <joint name="rs_d435i_infra2_optical_joint" type="fixed">
    <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
    <parent link="rs_d435i_infra2_frame"/>
    <child link="rs_d435i_infra2_optical_frame"/>
  </joint>
  <link name="rs_d435i_infra2_optical_frame"/>
  <!-- camera color joints and links -->
  <joint name="rs_d435i_color_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.015 0"/>
    <parent link="rs_d435i_link"/>
    <child link="rs_d435i_color_frame"/>
  </joint>
  <link name="rs_d435i_color_frame"/>
  <joint name="rs_d435i_color_optical_joint" type="fixed">
    <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
    <parent link="rs_d435i_color_frame"/>
    <child link="rs_d435i_color_optical_frame"/>
  </joint>
  <link name="rs_d435i_color_optical_frame"/>
  <gazebo reference="rs_d435i_link">
    <self_collide>0</self_collide>
    <enable_wind>0</enable_wind>
    <kinematic>0</kinematic>
    <gravity>1</gravity>
    <!--<mu>1</mu>-->
    <mu2>1</mu2>
    <fdir1>0 0 0</fdir1>
    <!--<slip1>0</slip1>
      <slip2>0</slip2>-->
    <kp>1e+13</kp>
    <kd>1</kd>
    <!--<max_vel>0.01</max_vel>
      <min_depth>0</min_depth>-->
    <sensor name="rs_d435icolor" type="camera">
      <camera name="rs_d435i">
        <horizontal_fov>1.21125850088</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>RGB_INT8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <update_rate>30</update_rate>
      <visualize>1</visualize>
    </sensor>
    <sensor name="rs_d435iired1" type="camera">
      <camera name="rs_d435i">
        <horizontal_fov>1.4870205227</horizontal_fov>
        <image>
          <width>1280</width>
          <height>720</height>
          <format>L_INT8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.05</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <update_rate>90</update_rate>
      <visualize>0</visualize>
    </sensor>
    <sensor name="rs_d435iired2" type="camera">
      <camera name="rs_d435i">
        <horizontal_fov>1.4870205227</horizontal_fov>
        <image>
          <width>1280</width>
          <height>720</height>
          <format>L_INT8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.05</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <update_rate>90</update_rate>
      <visualize>0</visualize>
    </sensor>
    <sensor name="rs_d435idepth" type="depth">
      <camera name="rs_d435i">
        <horizontal_fov>1.4870205227</horizontal_fov>
        <image>
          <!-- <width>1280</width>
            <height>720</height> -->
          <width>640</width>
          <height>360</height>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.100</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <!-- <update_rate>90</update_rate> -->
      <update_rate>15</update_rate>
      <visualize>0</visualize>
    </sensor>
  </gazebo>
  <gazebo>
    <plugin filename="librealsense_gazebo_plugin.so" name="Archimede/d435i_camera">
      <prefix>rs_d435i</prefix>
      <depthUpdateRate>30.0</depthUpdateRate>
      <colorUpdateRate>30.0</colorUpdateRate>
      <infraredUpdateRate>30.0</infraredUpdateRate>
      <depthTopicName>depth/image_raw</depthTopicName>
      <depthCameraInfoTopicName>depth/camera_info</depthCameraInfoTopicName>
      <colorTopicName>color/image_raw</colorTopicName>
      <colorCameraInfoTopicName>color/camera_info</colorCameraInfoTopicName>
      <infrared1TopicName>infra1/image_raw</infrared1TopicName>
      <infrared1CameraInfoTopicName>infra1/camera_info</infrared1CameraInfoTopicName>
      <infrared2TopicName>infra2/image_raw</infrared2TopicName>
      <infrared2CameraInfoTopicName>infra2/camera_info</infrared2CameraInfoTopicName>
      <colorOpticalframeName>rs_d435i_color_optical_frame</colorOpticalframeName>
      <depthOpticalframeName>rs_d435i_depth_optical_frame</depthOpticalframeName>
      <infrared1OpticalframeName>rs_d435i_left_ir_optical_frame</infrared1OpticalframeName>
      <infrared2OpticalframeName>rs_d435i_right_ir_optical_frame</infrared2OpticalframeName>
      <rangeMinDepth>0.2</rangeMinDepth>
      <rangeMaxDepth>10.0</rangeMaxDepth>
      <pointCloud>True</pointCloud>
      <pointCloudTopicName>depth/color/points</pointCloudTopicName>
      <pointCloudCutoff>0.25</pointCloudCutoff>
      <pointCloudCutoffMax>9.0</pointCloudCutoffMax>
    </plugin>
  </gazebo>
  <link name="rs_d435i_accel_frame"/>
  <link name="rs_d435i_accel_optical_frame"/>
  <link name="rs_d435i_gyro_frame"/>
  <link name="rs_d435i_gyro_optical_frame"/>
  <joint name="rs_d435i_accel_joint" type="fixed">
    <origin rpy="0 0 0" xyz="-0.01174 -0.00552 0.0051"/>
    <parent link="rs_d435i_link"/>
    <child link="rs_d435i_accel_frame"/>
  </joint>
  <joint name="rs_d435i_accel_optical_joint" type="fixed">
    <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
    <parent link="rs_d435i_accel_frame"/>
    <child link="rs_d435i_accel_optical_frame"/>
  </joint>
  <joint name="rs_d435i_gyro_joint" type="fixed">
    <origin rpy="0 0 0" xyz="-0.01174 -0.00552 0.0051"/>
    <parent link="rs_d435i_link"/>
    <child link="rs_d435i_gyro_frame"/>
  </joint>
  <joint name="rs_d435i_gyro_optical_joint" type="fixed">
    <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
    <parent link="rs_d435i_gyro_frame"/>
    <child link="rs_d435i_gyro_optical_frame"/>
  </joint>
  <gazebo reference="Archimede_imu_link">
    <sensor name="imu" type="imu">
      <always_on>true</always_on>
      <visualize>true</visualize>
    </sensor>
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="Archimede_scan_link">
    <material>Gazebo/FlatBlack</material>
    <sensor name="lds_lfcd_sensor" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <visualize>true</visualize>
      <update_rate>5</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>360</samples>
            <resolution>1</resolution>
            <min_angle>0.0</min_angle>
            <max_angle>6.28319</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>1</min>
          <max>5</max>
          <resolution>0.015</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <plugin filename="libgazebo_ros_laser.so" name="gazebo_ros_lds_lfcd_controller">
        <topicName>Archimede/scan</topicName>
        <frameName>Archimede_scan_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="Archimede_pi_camera_link">
    <sensor name="Archimede_raspi_camera" type="camera">
      <always_on>true</always_on>
      <visualize>true</visualize>
      <camera>
        <horizontal_fov>1.085595</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.03</near>
          <far>100</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>30.0</updateRate>
        <cameraName>/Archimede/pi_camera</cameraName>
        <frameName>Archimede_pi_camera_color_optical_frame</frameName>
        <imageTopicName>rgb/image_raw</imageTopicName>
        <cameraInfoTopicName>rgb/camera_info</cameraInfoTopicName>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>
    </sensor>
  </gazebo>
  <!-- <gazebo reference="${name}_realsense_d435i_link">
            <sensor name="${name}_d435i_color" type="camera">
                <camera name="${name}_d435i">
      <gazebo reference="${name}_imu_link">
            <sensor type="imu" name="imu">
            <always_on>true</always_on>
            <visualize>$(arg visualize_imu)</visualize>
            </sensor>
            <material>Gazebo/Grey</material>
        </gazebo>          <horizontal_fov>1.2112585008840648</horizontal_fov>
                <image>
                    <width>1920</width>
                    <height>1080</height>
                    <format>RGB_INT8</format>
                </image>
                <clip>
                    <near>0.1</near>
                    <far>100</far>
                </clip>
                <noise>
                    <type>gaussian</type>
                    <mean>0.0</mean>
                    <stddev>0.007</stddev>
                </noise>
                </camera>
                <always_on>1</always_on>
                <update_rate>30</update_rate>
                <visualize>1</visualize>
            </sensor>
            <sensor name="${name}_d435i_infrared_1" type="camera">
                <camera name="${name}_d435i">
                <horizontal_fov>1.4870205226991688</horizontal_fov>
                <image>
                    <width>1280</width>
                    <height>720</height>
                    <format>L_INT8</format>
                </image>
                <clip>
                    <near>0.1</near>
                    <far>100</far>
                </clip>
                <noise>
                    <type>gaussian</type>
                    <mean>0.0</mean>
                    <stddev>0.05</stddev>
                </noise>
                </camera>
                <always_on>1</always_on>
                <update_rate>90</update_rate>
                <visualize>0</visualize>
            </sensor>
            <sensor name="${name}_d435i_infrared_2" type="camera">
                <camera name="${name}_d435i">
                <horizontal_fov>1.4870205226991688</horizontal_fov>
                <image>
                   <gazebo reference="${name}_imu_link">
            <sensor type="imu" name="imu">
            <always_on>true</always_on>
            <visualize>$(arg visualize_imu)</visualize>
            </sensor>
            <material>Gazebo/Grey</material>
        </gazebo> <width>1280</width>
                    <height>720</height>
                    <format>L_INT8</format>
                </image>
                <clip>
                    <near>0.1</near>
                    <far>100</far>
                </clip>
                <noise>
                   <gazebo reference="${name}_imu_link">
            <sensor type="imu" name="imu">
            <always_on>true</always_on>
            <visualize>$(arg visualize_imu)</visualize>
            </sensor>
            <material>Gazebo/Grey</material>
        </gazebo> <type>gaussian</type>
                    <mean>0.0</mean>
                    <stddev>0.05</stddev>
                </noise>
                </camera>
                <always_on>1</always_on>
                <update_rate>90</update_rate>
                <visualize>0</visualize>
            </sensor>
            <sensor name="${name}_d435i_depth" type="depth">
                <camera name="${name}_d435i">
      <gazebo reference="${name}_imu_link">
            <sensor type="imu" name="imu">
            <always_on>true</always_on>
            <visualize>$(arg visualize_imu)</visualize>
            </sensor>
            <material>Gazebo/Grey</material>
        </gazebo>          <horizontal_fov>1.4870205226991688</horizontal_fov>
                <image>
                    <width>1280</width>
                    <height>720</height>
                </image>
                <clip>
                    <near>0.1</near>
                    <far>100</far>
                </clip>
                <noise>
                    <type>gaussian</type>
                    <mean>0.0</mean>
                    <stddev>0.100</stddev>
                </noise>
                </camera>
                <always_on>1</always_on>
                <update_rate>90</update_rate>
                <visualize>0</visualize>
            </sensor>
        </gazebo> -->
  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control">
      <robotNamespace>/Archimede</robotNamespace>
      <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
      <legacyModeNS>true</legacyModeNS>
    </plugin>
  </gazebo>
  <gazebo>
    <plugin filename="libarchimede_kinematics_gazebo_ros_simulation_plugin.so" name="Archimede_kinematic_plugin"/>
  </gazebo>
  <gazebo>
    <plugin filename="libarchimede_odometry_gazebo_plugin.so" name="Archimede_odometry_plugin">
      <integrator>Trapezi</integrator>
      <odomTopicName>Archimede/odom</odomTopicName>
      <odomQueSize>100</odomQueSize>
      <odomFrameName>odom</odomFrameName>
      <odomPublishRate>10</odomPublishRate>
      <baseLinkFrameName>Archimede_foot_print</baseLinkFrameName>
      <useFakePublishers>true</useFakePublishers>
      <motorCurrentTopicName>Archimede/motor_current</motorCurrentTopicName>
      <motorTemperatureTopicName>Archimede/motor_temperature</motorTemperatureTopicName>
      <soundTopicName>Archimede/sound</soundTopicName>
      <JointStateTopicName>Archimede/JointStateFake</JointStateTopicName>
      <SensorStateTopicName>Archimede/sensor_state</SensorStateTopicName>
      <OdomMode>position</OdomMode>
      <skipFrames>1</skipFrames>
    </plugin>
  </gazebo>
  <!-- INCLUDE HERE PLUGIN FOR IMU -->
  <!-- <gazebo>
            <plugin name="imu_plugin" filename="libgazebo_ros_imu.so">
            <alwaysOn>true</alwaysOn>
            <bodyName>${name}_imu_link</bodyName>
            <frameName>${name}_imu_link</frameName>
            <topicName>${name}/imu</topicName>
            <serviceName>imu_service</serviceName>
            <gaussianNoise>0.0</gaussianNoise>
            <updateRate>100</updateRate>
            <imu>
                <noise>
                <type>gaussian</type>
                <rate>
                    <mean>0.0</mean>
                    <stddev>2e-4</stddev>
                    <bias_mean>0.0000075</bias_mean>
                    <bias_stddev>0.0000008</bias_stddev>
                </rate>
                <accel>
                    <mean>0.0</mean>
                    <stddev>1.7e-2</stddev>
                    <bias_mean>0.1</bias_mean>
                    <bias_stddev>0.001</bias_stddev>
                </accel>
                </noise>
            </imu>
            </plugin>
        </gazebo> -->
  <!-- Try with hector gazebo plugin hector_gazebo_ros_imu-->
  <gazebo>
    <plugin filename="libhector_gazebo_ros_imu.so" name="Archimede_imu_sim">
      <updateRate>100</updateRate>
      <!-- <robotNamespace></robotNamespace> -->
      <bodyName>Archimede_imu_link</bodyName>
      <frameId>Archimede_imu_link</frameId>
      <topicName>Archimede/imu</topicName>
      <accelOffset>0 0 0</accelOffset>
      <accelDrift>0 0 0</accelDrift>
      <accelGaussianNoise>0 0 0</accelGaussianNoise>
      <rateOffset>0 0 0</rateOffset>
      <rateDrift>0 0 0</rateDrift>
      <rateGaussianNoise>0 0 0</rateGaussianNoise>
      <yawOffset>0</yawOffset>
      <yawDrift>0</yawDrift>
      <yawGaussianNoise>0</yawGaussianNoise>
    </plugin>
  </gazebo>
  <!-- <gazebo reference="${name}_imu_link">
            <gravity>true</gravity>
            <sensor name="imu_sensor" type="imu">
            <always_on>true</always_on>
            <update_rate>100</update_rate>
            <visualize>true</visualize>
            <topic>__default_topic__</topic>
            <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
                <topicName>${name}/imu</topicName>
                <bodyName>${name}_imu_link</bodyName>
                <updateRateHZ>10.0</updateRateHZ>
                <gaussianNoise>0.0</gaussianNoise>
                <xyzOffset>0 0 0</xyzOffset>
                <rpyOffset>0 0 0</rpyOffset>
                <frameName>${name}_imu_link</frameName>
                <initialOrientationAsReference>false</initialOrientationAsReference>
            </plugin>
            <pose>0 0 0 0 0 0</pose>
            </sensor>
        </gazebo>  -->
  <!-- <gazebo>
            <plugin name="${name}_get_body_pose" filename="libarchimede_get_link_state.so">
                <saveDir>$(find robot4ws_simulations)/data</saveDir>
                <linkName>${name}_base_link</linkName>
                <readCOG>false</readCOG>
                <worldMode>true</worldMode>
            </plugin>
        </gazebo>


        <gazebo>
            <plugin name="${name}_get_fr_steer_hub_pose" filename="libarchimede_get_link_state.so">
                <saveDir>$(find robot4ws_simulations)/data</saveDir>
                <linkName>${name}_fr_steer_link</linkName>
                <readCOG>false</readCOG>
                <worldMode>false</worldMode>
            </plugin>
        </gazebo> -->
  <gazebo>
    <plugin filename="libhector_gazebo_ros_magnetic.so" name="Archimede_magetic_sensor">
      <updateRate>100</updateRate>
      <robotNamespace>Archimede</robotNamespace>
      <bodyName>Archimede_imu_link</bodyName>
      <topicName>magnetic_field</topicName>
    </plugin>
  </gazebo>
</robot>

